<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<?xml-stylesheet type="text/xsl" href="modx.prosilver.en.xsl"?>
<!--For security purposes, please check: http
://www.phpbb.com/mods/ for the latest version of this MOD. Although MODs are checked before being allowed in the MODs Database there is no guarantee that there are no security problems within the MOD. No support will be given for MODs not found within the MODs Database which can be found at http://www.phpbb.com/mods/-->
<mod xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.phpbb.com/mods/xml/modx-1.2.1.xsd">
	<header>
		<license>http://opensource.org/licenses/gpl-license.php GNU General Public License v2</license>
		
		<title lang="en">MSSTI RSS Feed 2.0 with ACP</title>

		<description lang="en">This MOD adds a Really Simple Syndication (RSS) content to your forum.
		Can display list of Forums, Topics, Post, user post ( like ego search ) a particular forum or particular topic.
		Also it have pagination to have a fast view and better performance.</description>

		<author-notes lang="en"><![CDATA[
	RSS Feed Parser in Conjunction with Feeds Everywhere
	W3C Feed Validation Service

	-------------------------------------------------------------------

	Please do not remove the copyright notices without my permission.

	-------------------------------------------------------------------
	
	Tested on Windows Browsers:
		- Internet Explorer 7.0
		- Mozilla Firefox 2.0
		- Mozilla Firefox 3.0
		- Opera 9.5 ( Not Working )
		- Safari 3.0
		- Netscape 9
	
	-------------------------------------------------------------------

	Translation : ( See contrib/language folder )
		en [English]
		es [Spanish]

	-------------------------------------------------------------------
	
	Official last version
	-----------
	Meanwhile the phpBB group validation and as the MOD is not yet in the phpBB MOD database, check this official link for updates... http://www.mssti.com/phpbb3/index.php]]></author-notes>
	
		<author-group>
			<author>
				<realname>Gabriel</realname>
				<username>leviatan21</username>
				<email>info@mssti.com</email>
				<homepage>http://www.mssti.com/phpbb3/</homepage>
			</author>
		</author-group>
		
		<mod-version>1.0.4</mod-version>

		<installation>
			<level>easy</level>
			<time>600</time>
			<target-version>3.0.2</target-version>
		</installation>

		<history>
			<entry>
				<date>2008-08-25</date>
				<rev-version>1.0.4</rev-version>
				<changelog lang="en">
					<change> Fixed severals issues reported by MOD Team</change>
				</changelog>
			</entry>

			<entry>
				<date>2008-07-23</date>
				<rev-version>1.0.3</rev-version>
				<changelog lang="en">
					<change> Fixed pagination problems</change>
					<change> Display forum stats only in the first page</change>
				</changelog>
			</entry>

			<entry>
				<date>2008-01-30</date>
				<rev-version>1.0.2</rev-version>
				<changelog lang="en">
					<change>Fixed some IE problems</change>
					<change>Fixed display post content if is allowed</change>
				</changelog>
			</entry>

			<entry>
				<date>2008-01-10</date>
				<rev-version>1.0.1</rev-version>
				<changelog lang="en">
					<change>First release to phpbb3.0.1 Gold</change>
				</changelog>
			</entry>
		</history>
	
	</header>

	<action-group>
		<sql><![CDATA[#
# NOTE : Change the table prefix to adjust to your install. I use "phpbb_" as example.
#
INSERT INTO phpbb_config (config_name, config_value, is_dynamic) VALUES ('rss_enable', '1', 0);
INSERT INTO phpbb_config (config_name, config_value, is_dynamic) VALUES ('rss_overall_forums', '1', 0);
INSERT INTO phpbb_config (config_name, config_value, is_dynamic) VALUES ('rss_overall_threads', '1', 0);
INSERT INTO phpbb_config (config_name, config_value, is_dynamic) VALUES ('rss_overall_posts', '1', 0);
INSERT INTO phpbb_config (config_name, config_value, is_dynamic) VALUES ('rss_egosearch', '1', 0);
INSERT INTO phpbb_config (config_name, config_value, is_dynamic) VALUES ('rss_forum', '1', 0);
INSERT INTO phpbb_config (config_name, config_value, is_dynamic) VALUES ('rss_thread', '1', 0);
INSERT INTO phpbb_config (config_name, config_value, is_dynamic) VALUES ('rss_characters', '1000', 0);
INSERT INTO phpbb_config (config_name, config_value, is_dynamic) VALUES ('rss_limit', '30', 0);]]></sql>

		<copy>
			<file from="root/rss.php" to="rss.php" />
			<file from="root/includes/acp/acp_rss.php" to="includes/acp/acp_rss.php" />
			<file from="root/includes/acp/info/acp_rss.php" to="includes/acp/info/acp_rss.php" />
			<file from="root/language/en/mods/rss.php" to="language/en/mods/rss.php" />
			<file from="root/styles/rss_template.xml" to="styles/rss_template.xml" />
		</copy>
		
		<open src="includes/functions.php">
			<edit>
				<find><![CDATA[	// The following assigns all _common_ variables that may be used at any point in a template.]]></find>
				<action type="after-add"><![CDATA[// MOD : MSSTI RSS Feeds (V1.0.4) - Start
		$f_rss = request_var('f', 0);
		$t_rss = request_var('t', 0);
// MOD : MSSTI RSS Feeds (V1.0.4) - End]]></action>
			</edit>

			<edit>
				<find><![CDATA[		'SITE_LOGO_IMG'			=> $user->img('site_logo'))]]></find>
				<action type="before-add"><![CDATA[// MOD : MSSTI RSS Feeds (V1.0.4) - Start
		'U_RSS'				=> generate_board_url() . "/rss.$phpEx",
		'S_FORUM_ID'			=> $f_rss, 
		'S_TOPIC_ID'			=> $t_rss,
		'S_ENABLE_FEEDS'		=> ($config['rss_enable']) ? true : false,
		'S_ENABLE_FEEDS_FORUMS'		=> ($config['rss_overall_forums']) ? true : false,
		'S_ENABLE_FEEDS_THREADS'	=> ($config['rss_overall_threads']) ? true : false,
		'S_ENABLE_FEEDS_POSTS'		=> ($config['rss_overall_posts']) ? true : false,
		'S_ENABLE_FEEDS_EGOSEARCH'	=> ($config['rss_egosearch'] && $user->data['user_id'] != ANONYMOUS) ? true : false,
		'S_ENABLE_FEEDS_FORUM'		=> ($config['rss_forum']  && $f_rss != 0) ? true : false,
		'S_ENABLE_FEEDS_THREAD'		=> ($config['rss_thread'] && $t_rss != 0) ? true : false,
// MOD : MSSTI RSS Feeds (V1.0.4) - End]]></action>
			</edit>
		</open>

		<open src="language/en/common.php">
			<edit>
				<find><![CDATA[	'SEARCH_SELF'				=> 'View your posts',]]></find>
				<action type="after-add"><![CDATA[
// MOD : MSSTI RSS Feeds (V1.0.4) - Start
	'YOUR_POSTS'				=> 'Your posts',
	'RSS_FEEDS'					=> 'RSS Feeds',
// MOD : MSSTI RSS Feeds (V1.0.4) - End]]></action>
			</edit>
		</open>

		<open src="language/en/acp/common.php">
			<edit>
				<find><![CDATA[	'ACP_WORDS'					=> 'Word censoring',]]></find>
				<action type="after-add"><![CDATA[// MOD : MSSTI RSS Feeds (V1.0.4) - Start
	'ACP_RSS'					=> 'RSS management',
	'ACP_RSS_FEEDS'					=> 'RSS',
// MOD : MSSTI RSS Feeds (V1.0.4) - End]]></action>
				<comment lang="en">NOTE: See contrib/language folder for availables transtations</comment>
			</edit>
		</open>

		<open src="styles/prosilver/template/overall_header.html">
			<edit>
				<find><![CDATA[<title>{SITENAME} &bull; <!-- IF S_IN_MCP -->{L_MCP} &bull; <!-- ELSEIF S_IN_UCP -->{L_UCP} &bull; <!-- ENDIF -->{PAGE_TITLE}</title>]]></find>
				<action type="after-add"><![CDATA[<!-- // MOD : MSSTI RSS Feeds (V1.0.4) - Start-->

<!-- IF S_ENABLE_FEEDS -->
<link rel="alternate" type="application/rss+xml" title="{L_RSS_FEEDS} - {SITENAME}" href="{U_RSS}" />
<!-- IF S_ENABLE_FEEDS_FORUMS -->
<link rel="alternate" type="application/rss+xml" title="{L_RSS_FEEDS} - {L_ALL_FORUMS}" href="{U_RSS}?mode=forums" />
<!-- ENDIF -->
<!-- IF S_ENABLE_FEEDS_THREADS -->
<link rel="alternate" type="application/rss+xml" title="{L_RSS_FEEDS} - {L_ALL_TOPICS}" href="{U_RSS}?mode=topics" />
<!-- ENDIF -->
<!-- IF S_ENABLE_FEEDS_POSTS -->
<link rel="alternate" type="application/rss+xml" title="{L_RSS_FEEDS} - {L_ALL_POSTS}" href="{U_RSS}?mode=posts" />
<!-- ENDIF -->
<!-- IF S_ENABLE_FEEDS_EGOSEARCH && S_USER_LOGGED_IN -->
<link rel="alternate" type="application/rss+xml" title="{L_RSS_FEEDS} - {L_YOUR_POSTS}" href="{U_RSS}?mode=egosearch" />
<!-- ENDIF -->
<!-- IF S_ENABLE_FEEDS_FORUM && S_FORUM_ID -->
<link rel="alternate" type="application/rss+xml" title="{L_RSS_FEEDS} - {L_FORUM} {FORUM_NAME}" href="{U_RSS}?f={S_FORUM_ID}" />
<!-- ENDIF -->
<!-- IF S_ENABLE_FEEDS_THREAD && S_TOPIC_ID -->
<link rel="alternate" type="application/rss+xml" title="{L_RSS_FEEDS} - {L_TOPIC} {TOPIC_TITLE}" href="{U_RSS}?f={S_FORUM_ID}&amp;t={S_TOPIC_ID}" />
<!-- ENDIF -->
<!-- ENDIF -->

<!-- // MOD : MSSTI RSS Feeds (V1.0.4) - End -->
]]></action>
				<comment lang="en">NOTE: You will have to make this change to ALL themes you have installed. I use "prosilver" as an example.</comment>
			</edit>
		</open>

		<diy-instructions lang="en"><![CDATA[IMPORTANT !
	
Log on to Administration Control Panel

#####################################################################
A) Add RSS Feed module :

	A.1) Navigate to "System" tab.
	A.2) Under "Module management" click on "Administration Control Panel".
	A.3) Click on "System".
	A.4) Clik on "General tasks".
	A.5) in "add module" select "RSS" and click on "add module", them click on "yes".
	A.6) Afert refresh screen click RSS "enable".
	A.7) Afert refresh screen click again in "System" tab.
	A.8) Now you will able to see "RSS" down the "General tasks" in left menu.
	A.9) Click on "RSS" and set to your liking.

#####################################################################
B) Purge the templates :

	B.1) Navigate to "Styles" Tab.
	B.2) Under "Style components " click on "Templates".
	B.3) Under "Actions" click on "Refresh".
	B.4) in the next screen, click on "Yes".
	B.5) Repeat last 2 steps to each instaled style.
	
#####################################################################
C) Enjoy it !.

		]]></diy-instructions>
	</action-group>
</mod>